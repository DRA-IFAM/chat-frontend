<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Novo Compromisso</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" type="text/css" href="/globalStyles.css" />
    <link rel="stylesheet" type="text/css" href="/listaContato.css" />
  </head>

  <body>
    <nav th:insert="./fragments/navBar.html :: navbar"></nav>
    <h1>Novo Compromisso</h1>
    <div class="bd-example m-0 border-0">
      <form
        th:action="@{/compromisso}"
        th:object="${compromisso}"
        method="post"
      >
        <div class="mb-3">
          <label class="form-label" for="titulo">Título:</label>
          <input class="form-control" type="text" id="titulo" name="titulo" th:field="*{titulo}" />
          <span th:if="${#fields.hasErrors('titulo')}" th:errors="*{titulo}"></span>
        </div>

        <div class="mb-3">
          <label class="form-label" for="local">Local:</label>
          <input class="form-control" type="text" id="local" name="local" th:field="*{local}" />
        </div>

        <div class="mb-3">
          <label class="form-label" for="descricao">Descrição:</label>
          <input class="form-control"
            type="textArea"
            id="descricao"
            name="descricao"
            th:field="*{descricao}"
          />
        </div>

        
        <div class="mb-3">
            <label class="form-label" for="data">Data:</label>
            <input class="form-control"
              type="date"
              id="data"
              name="data"
              th:field="*{data}"
            />
          </div>



          <div class="mb-3">
            <label class="form-label" for="participantes">Participantes:</label>
            <div id="participantesContainer">
              <input class="form-control mb-2"
                type="text"
                id="participantes"
                name="participantes[]"
                placeholder="Digite o email do participante"
              />
            </div>
            <button
              type="button"
              class="btn btn-primary"
              onclick="addParticipante()"
            >Adicionar Participante</button>
            <div>
              <ul id="participantesList"></ul>
            </div>
          </div>
  
          <button type="submit" class="btn btn-primary">Salvar</button>
        </form>
      </div>
  
      <script>
        let participanteCount = 1;
      
        function addParticipante() {
          const participantesContainer = document.getElementById("participantesContainer");
          const newInput = document.createElement("input");
          newInput.type = "text";
          newInput.name = "participantes[]"; // Importante: nome deve ser 'participantes[]'
          newInput.placeholder = "Digite o email do participante " + (participanteCount + 1);
          newInput.className = "form-control mb-2";
          participantesContainer.appendChild(newInput);
          participanteCount++;
        }
      </script>
    </body>
  </html>